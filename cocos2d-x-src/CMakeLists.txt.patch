@@ -74,10 +74,11 @@ else()
   if(CMAKE_BUILD_TYPE MATCHES Debug)
     ADD_DEFINITIONS(-DCOCOS2D_DEBUG=1)
   endif()
-  set(CMAKE_C_FLAGS_DEBUG "-g -Wall")
-  set(CMAKE_CXX_FLAGS_DEBUG ${CMAKE_C_FLAGS_DEBUG})
-  set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -std=c99")
-  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11 -Wno-deprecated-declarations -Wno-reorder")
+  ADD_DEFINITIONS(-D_FORTIFY_SOURCE=2)
+  set(CMAKE_C_FLAGS_DEBUG "-g -Wall -O2 -pipe -fstack-protector-strong")
+  set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_C_FLAGS_DEBUG} -ldl")
+  set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -std=c99 -O2 -pipe -fstack-protector-strong")
+  set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -ldl -std=c++11 -Wno-deprecated-declarations -Wno-reorder -O2 -pipe -fstack-protector-strong")
   if(CLANG)
     set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -stdlib=libc++")
   endif()
